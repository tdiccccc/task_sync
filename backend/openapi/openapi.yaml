openapi: 3.0.0
info:
  title: Task Management API
  version: 1.0.0
  description: タスク管理・工数管理システムのAPI仕様
  contact:
    name: API Support
servers:
  - url: http://localhost:8200
    description: ローカル開発環境
tags:
  - name: Projects
    description: プロジェクト管理
components:
  schemas:
    CreateProjectRequest:
      type: object
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 50
          description: 案件名
          example: 案件A
        amount:
          type: number
          minimum: 0
          description: 金額
          example: 1000000
        description:
          type: string
          maxLength: 500
          description: 案件の概要
          example: 新規Webサイト開発プロジェクト
        started_at:
          type: string
          nullable: true
          format: date-time
          pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?(Z|[+-]\d{2}:\d{2})$
          example: 2024-01-01T00:00:00Z
          description: 着手日
        ended_at:
          type: string
          nullable: true
          format: date-time
          pattern: ^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{3})?(Z|[+-]\d{2}:\d{2})$
          example: 2024-12-31T23:59:59Z
          description: 完了日
        is_active:
          type: boolean
          default: true
          description: 進行中フラグ
          example: true
      required:
        - name
        - amount
        - description
  parameters: {}
paths:
  /api/projects:
    post:
      summary: プロジェクト作成
      description: 新しいプロジェクトを作成します
      tags:
        - Projects
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/CreateProjectRequest"
      responses:
        "201":
          description: プロジェクト作成成功
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: number
                  name:
                    type: string
                  amount:
                    type: number
                  description:
                    type: string
                  started_at:
                    type: string
                    nullable: true
                  ended_at:
                    type: string
                    nullable: true
                  is_active:
                    type: boolean
                  created_at:
                    type: string
                  updated_at:
                    type: string
                required:
                  - id
                  - name
                  - amount
                  - description
                  - started_at
                  - ended_at
                  - is_active
                  - created_at
                  - updated_at
        "400":
          description: バリデーションエラー
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                  errors:
                    type: object
                    additionalProperties: {}
                required:
                  - message
                  - errors
        "401":
          description: 認証エラー
